<!doctype html>
<html lang="en">
  <head>
    <title>Reset Password - Suggesto</title>
    <%- include('../../shared/includes/meta') %> <%-
    include('../../shared/includes/styles') %>
  </head>
  <body class="bg-background">
    <main class="flex min-h-screen items-center justify-center">
      <form
        action="/auth/reset-password"
        method="post"
        class="bg-primary w-full max-w-md space-y-6 rounded-xl p-10">
        <h1 class="text-center text-3xl font-bold tracking-tight">
          <%- include('../../shared/partials/logo-centered') %>
        </h1>
        <h2 class="text-center text-2xl">Reset your password</h2>

        <!-- Hidden fields for token and userId -->
        <input type="hidden" name="token" value="<%= token %>" />
        <input type="hidden" name="userId" value="<%= userId %>" />

        <div class="space-y-4">
          <div>
            <label
              for="password"
              class="block text-sm font-medium text-gray-700"
              >New Password</label
            >
            <input
              type="password"
              id="password"
              name="password"
              required
              minlength="6"
              class="mt-1 block w-full rounded-xl border border-gray-300 px-3 py-2 focus:border-black focus:ring-2 focus:ring-black focus:outline-none"
              autocomplete="new-password" />
          </div>
          <div>
            <label
              for="confirmPassword"
              class="block text-sm font-medium text-gray-700"
              >Confirm New Password</label
            >
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              required
              minlength="6"
              class="mt-1 block w-full rounded-xl border border-gray-300 px-3 py-2 focus:border-black focus:ring-2 focus:ring-black focus:outline-none"
              autocomplete="new-password" />
          </div>
        </div>

        <button
          type="submit"
          class="bg-gray-dark hover:bg-gray-light w-full cursor-pointer rounded-xl py-2 text-white transition-colors duration-300 ease-in-out hover:text-white focus:ring-2 focus:ring-black focus:outline-none">
          Reset Password
        </button>

        <div class="text-center text-sm">
          <span>Remember your password?</span>
          <a
            href="/auth/login"
            class="ml-1 cursor-pointer rounded-sm text-sm underline transition-colors duration-300 ease-in-out hover:text-black focus:ring-2 focus:ring-black focus:outline-none"
            >Back to Login</a
          >
        </div>
      </form>
    </main>

    <script>
      // Client-side password confirmation validation
      document.querySelector('form').addEventListener('submit', function (e) {
        const password = document.getElementById('password').value;
        const confirmPassword =
          document.getElementById('confirmPassword').value;

        if (password !== confirmPassword) {
          e.preventDefault();
          alert('Passwords do not match. Please try again.');
          document.getElementById('confirmPassword').focus();
        }
      });
    </script>

    <%- include('../../shared/includes/scripts') %>
  </body>
</html>
